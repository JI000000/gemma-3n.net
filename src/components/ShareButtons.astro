---
---
interface Props {
  title: string;
  url: URL | string;
}
const { title, url } = Astro.props;
const encodedTitle = encodeURIComponent(title);
const encodedUrl = encodeURIComponent(url.toString());

const shareLinks = {
    twitter: `https://twitter.com/intent/tweet?url=${encodedUrl}&text=${encodedTitle}`,
    linkedin: `https://www.linkedin.com/shareArticle?mini=true&url=${encodedUrl}&title=${encodedTitle}`,
    reddit: `https://www.reddit.com/submit?url=${encodedUrl}&title=${encodedTitle}`,
};
---

<div class="share-buttons mt-8 pt-6 border-t border-slate-200 dark:border-gray-700">
    <h4 class="font-bold text-lg text-slate-800 dark:text-gray-200 mb-3">Share this article</h4>
    <div class="flex items-center gap-3">
        <a href={shareLinks.twitter} target="_blank" rel="noopener noreferrer" aria-label="Share on Twitter" class="p-2 rounded-full bg-slate-200 dark:bg-gray-700 hover:bg-slate-300 dark:hover:bg-gray-600 transition-colors">
            <!-- Twitter Icon -->
            <svg class="w-5 h-5 text-slate-800 dark:text-gray-200" fill="currentColor" viewBox="0 0 24 24"><path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616v.064c0 2.298 1.634 4.215 3.792 4.654-.707.192-1.462.216-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.588-7.52 2.588-.49 0-.974-.028-1.455-.086 2.685 1.722 5.873 2.723 9.282 2.723 11.133 0 17.22-9.219 17.22-17.22 0-.262-.006-.523-.018-.783A12.307 12.307 0 0 0 24 4.557z"/></svg>
        </a>
        <a href={shareLinks.linkedin} target="_blank" rel="noopener noreferrer" aria-label="Share on LinkedIn" class="p-2 rounded-full bg-slate-200 dark:bg-gray-700 hover:bg-slate-300 dark:hover:bg-gray-600 transition-colors">
            <!-- LinkedIn Icon -->
            <svg class="w-5 h-5 text-slate-800 dark:text-gray-200" fill="currentColor" viewBox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg>
        </a>
        <a href={shareLinks.reddit} target="_blank" rel="noopener noreferrer" aria-label="Share on Reddit" class="p-2 rounded-full bg-slate-200 dark:bg-gray-700 hover:bg-slate-300 dark:hover:bg-gray-600 transition-colors">
            <!-- Reddit Icon (Simplified & Fixed) -->
            <svg class="w-6 h-6 text-slate-800 dark:text-gray-200" fill="currentColor" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 20.25c-5.122 0-9.25-3.04-9.25-6.75s4.128-6.75 9.25-6.75 9.25 3.04 9.25 6.75-4.128 6.75-9.25 6.75zM12 20.25v-4.5M12 6.75v-1.5m4.5 9.75a1.5 1.5 0 01-3 0m-3 0a1.5 1.5 0 01-3 0m7.5-6a1.5 1.5 0 00-3 0m-1.5 0a1.5 1.5 0 00-3 0" />
            </svg>
        </a>
        <button id="copy-link-btn" aria-label="Copy link to clipboard" class="p-2 rounded-full bg-slate-200 dark:bg-gray-700 hover:bg-slate-300 dark:hover:bg-gray-600 transition-colors">
            <!-- Copy Icon -->
            <svg class="w-5 h-5 text-slate-800 dark:text-gray-200" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
        </button>
    </div>
    <p id="copy-feedback" class="text-sm text-green-600 dark:text-green-500 h-4 mt-2"></p>
</div>

<script is:inline>
    const copyBtn = document.getElementById('copy-link-btn');
    const copyFeedback = document.getElementById('copy-feedback');

    copyBtn.addEventListener('click', () => {
        navigator.clipboard.writeText(window.location.href).then(() => {
            copyFeedback.textContent = 'Link copied!';
            setTimeout(() => {
                copyFeedback.textContent = '';
            }, 2000);
        }).catch(err => {
            copyFeedback.textContent = 'Failed to copy';
        });
    });
</script> 