---
// This component is configured for gemma-3n.net
// IMPORTANT: Please replace the category and categoryId below with the final values from your Giscus setup.
const giscusConfig = {
    repo: "JI000000/gemma-3n.net",
    repoId: "R_kgDOPCtS9g",
    category: "General", // <-- IMPORTANT: REPLACE with your chosen category name from Giscus.
    categoryId: "DIC_kwDOPCtS9s4CsGRf", // <-- IMPORTANT: REPLACE with your category ID from Giscus.
    mapping: "pathname",
    strict: "0",
    reactionsEnabled: "1",
    emitMetadata: "0",
    inputPosition: "bottom",
    lang: "en",
};
---
<div id="giscus-container" class="giscus mt-16"></div>

<script is:inline>
    function loadGiscus() {
        const container = document.getElementById('giscus-container');
        if (!container) return;

        // Clean up previous instance
        while (container.firstChild) {
            container.removeChild(container.firstChild);
        }

        const giscusScript = document.createElement('script');
        
        const theme = localStorage.getItem('theme') === 'dark' ? 'dark_dimmed' : 'light';

        giscusScript.src = 'https://giscus.app/client.js';
        giscusScript.async = true;
        giscusScript.crossOrigin = 'anonymous';
        
        for (const key in giscusConfig) {
            giscusScript.setAttribute(`data-${key.replace(/([A-Z])/g, "-$1").toLowerCase()}`, giscusConfig[key]);
        }
        giscusScript.setAttribute('data-theme', theme);
        
        container.appendChild(giscusScript);
    }

    document.addEventListener('astro:page-load', loadGiscus);
    document.addEventListener('theme-changed', loadGiscus);
</script>

<style>
    .giscus {
        margin-top: 4rem;
    }
</style> 