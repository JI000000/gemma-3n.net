---
import { getLangFromUrl, useTranslations } from '../i18n';
import MultimodalInput from './MultimodalInput.astro';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<div class="interactive-demo">
  <!-- Demo Header -->
  <div class="bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6 rounded-t-xl">
    <div class="flex items-center justify-between">
      <div>
        <h2 class="text-2xl font-bold mb-2">{t('demo.title')}</h2>
        <p class="text-blue-100">{t('demo.subtitle')}</p>
      </div>
      <div class="text-right flex items-center space-x-4">
        <div id="model-status" class="flex items-center space-x-2">
          <div id="status-indicator" class="w-3 h-3 bg-yellow-500 rounded-full animate-pulse"></div>
          <span id="status-text" class="text-sm">{t('demo.loading.initializing')}</span>
        </div>
        <!-- API Configuration Button -->
        <button 
          id="api-config-trigger"
          class="inline-flex items-center px-3 py-2 text-sm font-medium text-white bg-white/20 hover:bg-white/30 rounded-lg transition-colors border border-white/30"
        >
          <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
          </svg>
          {t('demo.api.config')}
        </button>
      </div>
    </div>
  </div>

  <!-- Demo Controls -->
  <div class="p-6 bg-white dark:bg-gray-800">
    <!-- Scenario Selection -->
    <div class="mb-6">
      <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">
        {t('demo.scenarios.label')}
      </label>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
        <button 
          class="scenario-btn active bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 p-4 rounded-lg text-left transition-colors"
          data-scenario="code"
        >
          <div class="flex items-center mb-2">
            <span class="text-2xl mr-3">ğŸ’»</span>
            <div>
              <div class="font-semibold">{t('demo.scenarios.code.title')}</div>
              <div class="text-sm opacity-75">{t('demo.scenarios.code.description')}</div>
            </div>
          </div>
        </button>
        <button 
          class="scenario-btn bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 p-4 rounded-lg text-left transition-colors"
          data-scenario="translate"
        >
          <div class="flex items-center mb-2">
            <span class="text-2xl mr-3">ğŸŒ</span>
            <div>
              <div class="font-semibold">{t('demo.scenarios.translate.title')}</div>
              <div class="text-sm opacity-75">{t('demo.scenarios.translate.description')}</div>
            </div>
          </div>
        </button>
        <button 
          class="scenario-btn bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 p-4 rounded-lg text-left transition-colors"
          data-scenario="chat"
        >
          <div class="flex items-center mb-2">
            <span class="text-2xl mr-3">ğŸ’¬</span>
            <div>
              <div class="font-semibold">{t('demo.scenarios.chat.title')}</div>
              <div class="text-sm opacity-75">{t('demo.scenarios.chat.description')}</div>
            </div>
          </div>
        </button>
      </div>
    </div>

    <!-- Multimodal Input -->
    <div class="mb-6">
      <MultimodalInput />
    </div>

    <!-- Parameters -->
    <div class="mb-6">
      <label for="temperature-slider" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
        {t('demo.parameters.label')}
      </label>
      <div class="flex items-center space-x-4">
        <input 
          type="range" 
          id="temperature-slider" 
          min="0" 
          max="1" 
          step="0.1" 
          value="0.7" 
          class="flex-1"
        />
        <span id="temperature-value" class="text-sm font-medium text-gray-700 dark:text-gray-300">0.7</span>
      </div>
      <div class="flex justify-between text-xs text-gray-500 mt-1">
        <span>{t('demo.parameters.conservative')}</span>
        <span>{t('demo.parameters.creative')}</span>
      </div>
    </div>

    <!-- Generate Button -->
    <div class="mb-6">
      <button 
        id="generate-btn" 
        class="w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-medium py-3 px-6 rounded-lg transition-colors"
        disabled
      >
        <span id="generate-text">{t('demo.button.loading')}</span>
        <span id="generate-loading" class="hidden">
          <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white inline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
          </svg>
          {t('demo.button.generating')}
        </span>
      </button>
    </div>

    <!-- Output Area -->
    <div class="mb-6">
      <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
        {t('demo.output.label')}
      </label>
      <div 
        id="output-area" 
        class="w-full h-48 p-4 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-500 dark:text-gray-400 overflow-y-auto resize-none"
      >
        {t('demo.output.placeholder')}
      </div>
    </div>

    <!-- Performance Metrics -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
      <div class="bg-gray-50 dark:bg-gray-700 p-3 rounded-lg">
        <div class="text-sm text-gray-500 dark:text-gray-400">{t('demo.metrics.tokensPerSecond')}</div>
        <div id="tokens-per-sec" class="text-lg font-semibold text-gray-900 dark:text-white">--</div>
      </div>
      <div class="bg-gray-50 dark:bg-gray-700 p-3 rounded-lg">
        <div class="text-sm text-gray-500 dark:text-gray-400">{t('demo.metrics.inferenceTime')}</div>
        <div id="inference-time" class="text-lg font-semibold text-gray-900 dark:text-white">--</div>
      </div>
      <div class="bg-gray-50 dark:bg-gray-700 p-3 rounded-lg">
        <div class="text-sm text-gray-500 dark:text-gray-400">{t('demo.metrics.memoryUsage')}</div>
        <div id="memory-usage" class="text-lg font-semibold text-gray-900 dark:text-white">--</div>
      </div>
      <div class="bg-gray-50 dark:bg-gray-700 p-3 rounded-lg">
        <div class="text-sm text-gray-500 dark:text-gray-400">{t('demo.metrics.modelSize')}</div>
        <div class="text-lg font-semibold text-gray-900 dark:text-white">4.1GB</div>
      </div>
    </div>

    <!-- API Status Indicator -->
    <div id="api-status-banner" class="mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg">
      <div class="flex items-center">
        <div id="api-status-indicator" class="w-3 h-3 bg-yellow-500 rounded-full mr-2"></div>
        <span id="api-status-text" class="text-sm text-blue-800 dark:text-blue-200">
          {t('demo.api.status.checking')}
        </span>
      </div>
    </div>
  </div>
  
  <!-- API Configuration Modal -->
  <div id="api-config-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
    <div class="flex items-center justify-center min-h-screen p-4">
      <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6">
        <div class="flex items-center justify-between mb-4">
          <h3 class="text-lg font-semibold text-gray-900 dark:text-white">
            {t('demo.api.title')}
          </h3>
          <button id="close-api-config" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </button>
        </div>

        <form id="api-config-form" class="space-y-4">
          <!-- API Provider Selection -->
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              {t('demo.api.provider')}
            </label>
            <select id="api-provider" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white">
              <option value="huggingface">{t('demo.api.huggingface')}</option>
              <option value="ollama">{t('demo.api.ollama')}</option>
              <option value="custom">{t('demo.api.custom')}</option>
            </select>
          </div>

          <!-- API Endpoint -->
          <div>
            <label for="api-endpoint" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              {t('demo.api.endpoint')}
            </label>
            <input 
              type="url" 
              id="api-endpoint" 
              class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"
              placeholder="https://api-inference.huggingface.co/models/google/gemma-3n-4b-it"
            />
          </div>

          <!-- API Key -->
          <div>
            <label for="api-key" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              {t('demo.api.key')}
            </label>
            <div class="relative">
              <input 
                type="password" 
                id="api-key" 
                class="w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"
                placeholder="hf_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
              />
              <button 
                type="button" 
                id="toggle-api-key" 
                class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"
              >
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                </svg>
              </button>
            </div>
            <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">
              {t('demo.api.key_help')}
            </p>
          </div>

          <!-- Model Selection -->
          <div>
            <label for="api-model" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              {t('demo.api.model')}
            </label>
            <select id="api-model" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white">
              <option value="google/gemma-3n-4b-it">Gemma 3n E4B (4B)</option>
              <option value="google/gemma-3n-2b-it">Gemma 3n E2B (2B)</option>
            </select>
          </div>

          <!-- Test Connection -->
          <div>
            <button type="button" id="test-connection" class="w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors">
              {t('demo.api.test')}
            </button>
          </div>

          <!-- Save Configuration -->
          <div class="flex space-x-3">
            <button type="submit" class="flex-1 px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors">
              {t('demo.api.save')}
            </button>
            <button type="button" id="reset-config" class="flex-1 px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white font-medium rounded-lg transition-colors">
              {t('demo.api.reset')}
            </button>
          </div>
        </form>

        <!-- Status Messages -->
        <div id="api-status-message" class="mt-4 p-3 rounded-lg hidden">
          <p id="status-text" class="text-sm"></p>
        </div>
      </div>
    </div>
  </div>
</div>

<script define:vars={{
  t_loading_initializing: t('demo.loading.initializing'),
  t_loading_engine: t('demo.loading.engine'),
  t_loading_wasm: t('demo.loading.wasm'),
  t_loading_vocab: t('demo.loading.vocab'),
  t_loading_weights: t('demo.loading.weights'),
  t_loading_ready: t('demo.loading.ready'),
  t_status_ready: t('demo.status.ready'),
  t_button_loading: t('demo.button.loading'),
  t_button_generate: t('demo.button.generate'),
  t_button_generating: t('demo.button.generating'),
  t_output_placeholder: t('demo.output.placeholder'),
  t_output_thinking: t('demo.output.thinking'),
  t_output_error: t('demo.output.error'),
  t_alert_no_input: t('demo.alert.no_input'),
  t_error: t('demo.output.error'),
}}>
  // æ¨¡æ‹ŸgemmaApiï¼Œé¿å…å¯¼å…¥é—®é¢˜ï¼Œå¹¶æš´éœ²åˆ° window ä¾›å…¶å®ƒç»„ä»¶è°ƒç”¨
  const gemmaApi = {
    baseUrl: localStorage.getItem('gemma_api_endpoint') || 'https://api-inference.huggingface.co/models/google/gemma-3n-4b-it',
    apiKey: localStorage.getItem('gemma_api_key') || undefined,
    setApiConfig(endpoint, apiKey) {
      this.baseUrl = endpoint;
      this.apiKey = apiKey;
    },
    async checkApiStatus() { 
      // æ£€æŸ¥æ˜¯å¦æœ‰é…ç½®çš„APIç«¯ç‚¹
      const endpoint = localStorage.getItem('gemma_api_endpoint');
      const apiKey = localStorage.getItem('gemma_api_key');
      
      // å¦‚æœæœ‰é…ç½®ï¼Œå°è¯•è¿æ¥ï¼›å¦åˆ™è¿”å›falseï¼ˆä½¿ç”¨æ¨¡æ‹Ÿæ¨¡å¼ï¼‰
      if (endpoint && endpoint.trim() !== '') {
        try {
          // è¿™é‡Œå¯ä»¥æ·»åŠ çœŸå®çš„APIè¿æ¥æµ‹è¯•
          // æš‚æ—¶è¿”å›trueè¡¨ç¤ºå·²é…ç½®
          return true;
        } catch (error) {
          console.error('API connection test failed:', error);
          return false;
        }
      }
      return false;
    },
    async generateText(params) {
      // æ ¹æ®å½“å‰åœºæ™¯è¿”å›åˆé€‚çš„å“åº”
      const currentScenario = window.currentScenario || 'code';
      
      const responses = {
        code: this.generateCodeResponse(params.prompt),
        translate: `ç¿»è¯‘ç»“æœï¼š\n\nä¸­æ–‡ï¼š${params.prompt}\nè‹±æ–‡ï¼š${this.translateToEnglish(params.prompt)}\n\nå…¶ä»–è¯­è¨€ï¼š\n- æ³•è¯­ï¼š${this.translateToFrench(params.prompt)}\n- å¾·è¯­ï¼š${this.translateToGerman(params.prompt)}\n- æ—¥è¯­ï¼š${this.translateToJapanese(params.prompt)}`,
        chat: `æˆ‘ç†è§£æ‚¨çš„é—®é¢˜ï¼š"${params.prompt}"\n\nè®©æˆ‘ä¸ºæ‚¨æä¾›è¯¦ç»†çš„å›ç­”ï¼š\n\n${this.generateChatResponse(params.prompt)}\n\nå¦‚æœæ‚¨éœ€è¦æ›´å¤šä¿¡æ¯æˆ–æœ‰å…¶ä»–é—®é¢˜ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ï¼`
      };
      
      return {
        content: responses[currentScenario] || responses.code,
        usage: {
          prompt_tokens: Math.floor(params.prompt.length / 4),
          completion_tokens: 50,
          total_tokens: Math.floor(params.prompt.length / 4) + 50,
        }
      };
    },
    
    // æ”¹è¿›çš„ä»£ç ç”Ÿæˆå‡½æ•°
    generateCodeResponse(prompt) {
      const lowerPrompt = prompt.toLowerCase();
      
      // æ‰“å°ç›¸å…³
      if (lowerPrompt.includes('æ‰“å°') || lowerPrompt.includes('print') || lowerPrompt.includes('è¾“å‡º')) {
        if (lowerPrompt.includes('hello') || lowerPrompt.includes('ä½ å¥½')) {
          return `// ${prompt}\n\n// JavaScript ç‰ˆæœ¬\nconsole.log("Hello World");\n\n// Python ç‰ˆæœ¬\nprint("Hello World")\n\n// Java ç‰ˆæœ¬\nSystem.out.println("Hello World");\n\n// C++ ç‰ˆæœ¬\n#include <iostream>\nint main() {\n    std::cout << "Hello World" << std::endl;\n    return 0;\n}`;
        }
        return `// ${prompt}\n\n// JavaScript ç‰ˆæœ¬\nconsole.log("Hello World");\n\n// Python ç‰ˆæœ¬\nprint("Hello World")\n\n// å…¶ä»–è¯­è¨€ç‰ˆæœ¬è¯·å‘Šè¯‰æˆ‘å…·ä½“éœ€æ±‚`;
      }
      
      // å‡½æ•°ç›¸å…³
      if (lowerPrompt.includes('å‡½æ•°') || lowerPrompt.includes('function')) {
        return `// ${prompt}\n\n// JavaScript å‡½æ•°ç¤ºä¾‹\nfunction example() {\n    const result = "Hello World";\n    return result;\n}\n\n// è°ƒç”¨å‡½æ•°\nconsole.log(example());\n\n// Python å‡½æ•°ç¤ºä¾‹\ndef example():\n    result = "Hello World"\n    return result\n\n# è°ƒç”¨å‡½æ•°\nprint(example())`;
      }
      
      // å¾ªç¯ç›¸å…³
      if (lowerPrompt.includes('å¾ªç¯') || lowerPrompt.includes('loop') || lowerPrompt.includes('for') || lowerPrompt.includes('while')) {
        return `// ${prompt}\n\n// JavaScript for å¾ªç¯\nfor (let i = 0; i < 5; i++) {\n    console.log("Hello World " + i);\n}\n\n// Python for å¾ªç¯\nfor i in range(5):\n    print(f"Hello World {i}")\n\n// JavaScript while å¾ªç¯\nlet i = 0;\nwhile (i < 5) {\n    console.log("Hello World " + i);\n    i++;\n}`;
      }
      
      // æ•°ç»„ç›¸å…³
      if (lowerPrompt.includes('æ•°ç»„') || lowerPrompt.includes('array') || lowerPrompt.includes('åˆ—è¡¨')) {
        return `// ${prompt}\n\n// JavaScript æ•°ç»„æ“ä½œ\nconst arr = [1, 2, 3, 4, 5];\nconsole.log("æ•°ç»„:", arr);\nconsole.log("é•¿åº¦:", arr.length);\nconsole.log("ç¬¬ä¸€ä¸ªå…ƒç´ :", arr[0]);\n\n// Python åˆ—è¡¨æ“ä½œ\narr = [1, 2, 3, 4, 5]\nprint("åˆ—è¡¨:", arr)\nprint("é•¿åº¦:", len(arr))\nprint("ç¬¬ä¸€ä¸ªå…ƒç´ :", arr[0])`;
      }
      
      // é»˜è®¤ä»£ç ç¤ºä¾‹
      return `// ${prompt}\n\n// JavaScript ç¤ºä¾‹\nfunction example() {\n    const result = "Hello World";\n    console.log(result);\n    return result;\n}\n\n// è°ƒç”¨å‡½æ•°\nexample();\n\n// Python ç¤ºä¾‹\ndef example():\n    result = "Hello World"\n    print(result)\n    return result\n\n# è°ƒç”¨å‡½æ•°\nexample()`;
    },
    
    // ç¿»è¯‘è¾…åŠ©å‡½æ•°
    translateToEnglish(text) {
      const translations = {
        'æˆ‘çˆ±ä½ ': 'I love you',
        'ä½ å¥½': 'Hello',
        'è°¢è°¢': 'Thank you',
        'å†è§': 'Goodbye',
        'æ—©ä¸Šå¥½': 'Good morning',
        'æ™šä¸Šå¥½': 'Good evening',
        'å¯¹ä¸èµ·': 'Sorry',
        'æ²¡å…³ç³»': "It's okay"
      };
      
      for (const [chinese, english] of Object.entries(translations)) {
        if (text.includes(chinese)) {
          return english;
        }
      }
      return 'Translation not available';
    },
    
    translateToFrench(text) {
      const translations = {
        'æˆ‘çˆ±ä½ ': 'Je t\'aime',
        'ä½ å¥½': 'Bonjour',
        'è°¢è°¢': 'Merci',
        'å†è§': 'Au revoir'
      };
      
      for (const [chinese, french] of Object.entries(translations)) {
        if (text.includes(chinese)) {
          return french;
        }
      }
      return 'Traduction non disponible';
    },
    
    translateToGerman(text) {
      const translations = {
        'æˆ‘çˆ±ä½ ': 'Ich liebe dich',
        'ä½ å¥½': 'Hallo',
        'è°¢è°¢': 'Danke',
        'å†è§': 'Auf Wiedersehen'
      };
      
      for (const [chinese, german] of Object.entries(translations)) {
        if (text.includes(chinese)) {
          return german;
        }
      }
      return 'Ãœbersetzung nicht verfÃ¼gbar';
    },
    
    translateToJapanese(text) {
      const translations = {
        'æˆ‘çˆ±ä½ ': 'æ„›ã—ã¦ã‚‹',
        'ä½ å¥½': 'ã“ã‚“ã«ã¡ã¯',
        'è°¢è°¢': 'ã‚ã‚ŠãŒã¨ã†',
        'å†è§': 'ã•ã‚ˆã†ãªã‚‰'
      };
      
      for (const [chinese, japanese] of Object.entries(translations)) {
        if (text.includes(chinese)) {
          return japanese;
        }
      }
      return 'ç¿»è¨³ã§ãã¾ã›ã‚“';
    },
    
    generateChatResponse(prompt) {
      const q = (prompt || '').trim();
      const hasWhat = /æ˜¯ä»€ä¹ˆ|å®šä¹‰|æ¦‚å¿µ/.test(q);
      const hasHow = /å¦‚ä½•|æ€ä¹ˆ|æ­¥éª¤|æ•™ç¨‹|åŠæ³•/.test(q);
      const hasWhy = /ä¸ºä»€ä¹ˆ|åŸå› /.test(q);
      const hasDiff = /å¯¹æ¯”|åŒºåˆ«|å·®å¼‚/.test(q);

      // å†…ç½®çŸ¥è¯†ç¤ºä¾‹ï¼šåŒ—æ–—ä¸ƒæ˜Ÿ
      if (/åŒ—æ–—ä¸ƒæ˜Ÿ/.test(q)) {
        return (
          `å…³äºâ€œåŒ—æ–—ä¸ƒæ˜Ÿâ€çš„è§£é‡Šï¼š\n\n` +
          `æ¦‚è¿°ï¼š\n- åŒ—æ–—ä¸ƒæ˜Ÿæ˜¯å¤§ç†Šåº§çš„ä¸€éƒ¨åˆ†ï¼Œç”±ä¸ƒé¢—æ˜äº®æ’æ˜Ÿç»„æˆï¼ˆå¤©æ¢ã€å¤©ç’‡ã€å¤©ç‘ã€å¤©æƒã€ç‰è¡¡ã€å¼€é˜³ã€æ‘‡å…‰ï¼‰ã€‚\n- å¤©æ–‡ä¸Šç§°ä¸ºâ€œæ–—æŸ„â€å’Œâ€œæ–—é­â€ï¼Œå¸¸ç”¨äºæŒ‡å¼•åŒ—ææ˜Ÿï¼ˆé€šè¿‡å¤©æ¢ä¸å¤©ç’‡è¿çº¿æŒ‡å‘åŒ—ææ˜Ÿï¼‰ã€‚\n\n` +
          `å…³é”®è¦ç‚¹ï¼š\n- æ–‡åŒ–ï¼šåœ¨ä¸­å›½ä¼ ç»Ÿæ–‡åŒ–ä¸å†æ³•ä¸­å…·æœ‰é‡è¦æ„ä¹‰ã€‚\n- å¯¼èˆªï¼šå¤ä»£å¤œé—´è¾¨æ–¹å‘çš„é‡è¦å‚è€ƒã€‚\n- ä½ç½®ï¼šä½äºåŒ—å¤©ï¼Œéšå­£èŠ‚åœ¨å¤©ç©ºä½ç½®æœ‰æ‰€å˜åŒ–ã€‚\n\n` +
          `æ‹“å±•ï¼š\n- ä¸åŒ—ææ˜Ÿå…³ç³»ï¼šä»å¤©æ¢â†’å¤©ç’‡è¿çº¿å»¶é•¿çº¦5å€å³å¯æ‰¾åˆ°åŒ—ææ˜Ÿã€‚\n- ä¸ƒæ˜Ÿåç§°ï¼šå¤©æ¢(Î±UMa)ã€å¤©ç’‡(Î²UMa)ã€å¤©ç‘(Î³UMa)ã€å¤©æƒ(Î´UMa)ã€ç‰è¡¡(ÎµUMa)ã€å¼€é˜³(Î¶UMaï¼Œå«è¾…æ˜Ÿ)ã€æ‘‡å…‰(Î·UMa)ã€‚\n\n` +
          `å¦‚æœä½ éœ€è¦å›¾ç¤ºæˆ–è§‚æµ‹æŒ‡å—ï¼Œæˆ‘å¯ä»¥ç»™å‡ºé¢å‘åˆå­¦è€…çš„è§‚æ˜Ÿæ­¥éª¤ã€‚`
        );
      }

      // é€šç”¨ç»“æ„åŒ–å›ç­”
      let parts = [];
      if (hasWhat) {
        parts.push(`æ¦‚è¿°ï¼š\n- â€œ${q}â€é€šå¸¸æŒ‡å‘ä¸€ä¸ªæ¦‚å¿µ/å¯¹è±¡/ç°è±¡ã€‚\n- ä¸‹é¢ç»™å‡ºå®šä¹‰ã€æ ¸å¿ƒè¦ç‚¹ä¸åº”ç”¨åœºæ™¯ã€‚`);
      }
      if (hasHow) {
        parts.push(`æ“ä½œæ­¥éª¤ï¼š\n1) æ˜ç¡®ç›®æ ‡ä¸å‰ç½®æ¡ä»¶\n2) å‡†å¤‡å¿…è¦å·¥å…·æˆ–æ•°æ®\n3) æŒ‰æ­¥éª¤æ‰§è¡Œï¼ˆä»ç®€å•åˆ°å¤æ‚ï¼‰\n4) éªŒè¯ç»“æœä¸å›æ»šæ–¹æ¡ˆ\n5) è®°å½•ç»“è®ºä¸å¯å¤ç”¨æ¸…å•`);
      }
      if (hasWhy) {
        parts.push(`åŸå› åˆ†æï¼š\n- ç›´æ¥åŸå› ï¼šä»ç°è±¡åˆ°æˆå› çš„ç¬¬ä¸€æ€§è§£é‡Š\n- é—´æ¥å› ç´ ï¼šç¯å¢ƒã€ä¾èµ–ã€çº¦æŸ\n- éªŒè¯æ–¹æ³•ï¼šå¦‚ä½•ç”¨æ•°æ®/å®éªŒéªŒè¯å‡è®¾`);
      }
      if (hasDiff) {
        parts.push(`å¯¹æ¯”ç»´åº¦ï¼š\n- å®šä¹‰ä¸é€‚ç”¨åœºæ™¯\n- æ€§èƒ½/æˆæœ¬/å¤æ‚åº¦\n- é£é™©ä¸è¾¹ç•Œæ¡ä»¶\n- é€‰æ‹©å»ºè®®`);
      }
      if (parts.length === 0) {
        parts = [
          `æ¦‚è¿°ï¼š\n- ä½ åœ¨è¯¢é—®â€œ${q}â€ï¼Œæˆ‘å°†ç»™å‡ºä¸€ä¸ªç®€æ˜çš„è§£é‡Šä¸å¯æ‰§è¡Œå»ºè®®ã€‚`,
          `å…³é”®è¦ç‚¹ï¼š\n- èƒŒæ™¯/å®šä¹‰\n- å…¸å‹åº”ç”¨\n- å¸¸è§è¯¯åŒº`,
          `å»ºè®®ä¸ä¸‹ä¸€æ­¥ï¼š\n- å¦‚éœ€æ›´ä¸“ä¸š/æ›´æ·±å…¥ï¼Œè¯·è¡¥å……å…·ä½“ä¸Šä¸‹æ–‡ï¼ˆç›®æ ‡ã€çº¦æŸã€è¾“å…¥è¾“å‡ºæ ¼å¼ç­‰ï¼‰ã€‚`
        ];
      }
      return parts.join(`\n\n`);
    }
  };
  window.gemmaApi = gemmaApi;

  class GemmaDemo {
    constructor() {
      console.log('GemmaDemo constructor called');
      this.isModelLoaded = false;
      this.currentScenario = 'code';
      this.isGenerating = false;
      this.apiStatus = 'checking';
      
      // ç«‹å³åˆå§‹åŒ–ï¼Œä¸ç­‰å¾…DOMContentLoaded
      this.init();
    }

    init() {
      console.log('GemmaDemo init called');
      try {
        this.initEventListeners();
        this.setInitialState();
        // åº”ç”¨æœ¬åœ°å·²ä¿å­˜çš„APIé…ç½®ï¼Œé¿å…çŠ¶æ€ä¸ä¸€è‡´
        try {
          const ep = localStorage.getItem('gemma_api_endpoint');
          const key = localStorage.getItem('gemma_api_key');
          if (ep) gemmaApi.setApiConfig(ep, key || undefined);
        } catch {}
        this.initModel();
        this.checkApiStatus();
      } catch (error) {
        console.error('Error in init:', error);
      }
    }

    setInitialState() {
      console.log('Setting initial state');
      // Disable scenario buttons initially
      const scenarioButtons = document.querySelectorAll('.scenario-btn');
      console.log('Found scenario buttons:', scenarioButtons.length);
      
      scenarioButtons.forEach(btn => {
        btn.disabled = true;
        btn.style.cursor = 'not-allowed';
        btn.style.opacity = '0.6';
      });
      
      // Disable input fields initially
      const input = document.getElementById('demo-input');
      if (input) {
        input.disabled = true;
        input.style.cursor = 'not-allowed';
        input.style.opacity = '0.6';
      }
      
      // Disable generate button initially
      const generateBtn = document.getElementById('generate-btn');
      if (generateBtn) {
        generateBtn.disabled = true;
        generateBtn.style.cursor = 'not-allowed';
      }
    }

    initEventListeners() {
      console.log('Initializing event listeners');
      
      // Scenario buttons
      const scenarioButtons = document.querySelectorAll('.scenario-btn');
      scenarioButtons.forEach(btn => {
        btn.addEventListener('click', (e) => {
          console.log('Scenario button clicked:', e.currentTarget.dataset.scenario);
          this.switchScenario(e.currentTarget.dataset.scenario);
        });
      });

      // Temperature slider
      const tempSlider = document.getElementById('temperature-slider');
      const tempValue = document.getElementById('temperature-value');
      if (tempSlider && tempValue) {
        tempSlider.addEventListener('input', (e) => {
          tempValue.textContent = e.target.value;
        });
      }

      // Generate button
      const generateBtn = document.getElementById('generate-btn');
      if (generateBtn) {
        generateBtn.addEventListener('click', () => {
          console.log('Generate button clicked');
          this.generateResponse();
        });
      }

      // API Configuration
      this.initApiConfig();
    }

    initApiConfig() {
      const trigger = document.getElementById('api-config-trigger');
      const modal = document.getElementById('api-config-modal');
      const closeBtn = document.getElementById('close-api-config');
      const form = document.getElementById('api-config-form');
      const testBtn = document.getElementById('test-connection');
      const resetBtn = document.getElementById('reset-config');
      const toggleKeyBtn = document.getElementById('toggle-api-key');

      if (trigger && modal) {
        trigger.addEventListener('click', () => {
          modal.classList.remove('hidden');
          this.loadApiConfig();
        });
      }

      if (closeBtn && modal) {
        closeBtn.addEventListener('click', () => {
          modal.classList.add('hidden');
        });
      }

      if (modal) {
        modal.addEventListener('click', (e) => {
          if (e.target === modal) {
            modal.classList.add('hidden');
          }
        });
      }

      if (form) {
        form.addEventListener('submit', (e) => {
          e.preventDefault();
          this.saveApiConfig();
        });
      }

      if (testBtn) {
        testBtn.addEventListener('click', () => {
          this.testApiConnection();
        });
      }

      if (resetBtn) {
        resetBtn.addEventListener('click', () => {
          this.resetApiConfig();
        });
      }

      if (toggleKeyBtn) {
        toggleKeyBtn.addEventListener('click', () => {
          this.toggleApiKeyVisibility();
        });
      }
    }

    loadApiConfig() {
      const endpoint = document.getElementById('api-endpoint');
      const apiKey = document.getElementById('api-key');
      
      if (endpoint) {
        endpoint.value = localStorage.getItem('gemma_api_endpoint') || '';
      }
      if (apiKey) {
        apiKey.value = localStorage.getItem('gemma_api_key') || '';
      }
    }

    saveApiConfig() {
      const endpoint = document.getElementById('api-endpoint');
      const apiKey = document.getElementById('api-key');
      
      if (endpoint && apiKey) {
        localStorage.setItem('gemma_api_endpoint', endpoint.value);
        localStorage.setItem('gemma_api_key', apiKey.value);
        
        // Update gemmaApi configuration
        gemmaApi.setApiConfig(endpoint.value, apiKey.value);
        
        // Close modal and update status
        const modal = document.getElementById('api-config-modal');
        if (modal) {
          modal.classList.add('hidden');
        }
        
        this.checkApiStatus();
        this.showStatusMessage('âœ… é…ç½®ä¿å­˜æˆåŠŸï¼', 'success');
      }
    }

    async testApiConnection() {
      const endpoint = document.getElementById('api-endpoint');
      if (!endpoint || !endpoint.value) {
        this.showStatusMessage('âŒ è¯·è¾“å…¥APIç«¯ç‚¹', 'error');
        return;
      }

      this.showStatusMessage('æ­£åœ¨æµ‹è¯•è¿æ¥...', 'info');
      
      try {
        const isAvailable = await gemmaApi.checkApiStatus();
        if (isAvailable) {
          this.showStatusMessage('âœ… è¿æ¥æˆåŠŸï¼', 'success');
        } else {
          this.showStatusMessage('âŒ è¿æ¥å¤±è´¥', 'error');
        }
      } catch (error) {
        this.showStatusMessage('âŒ è¿æ¥æµ‹è¯•å¤±è´¥', 'error');
      }
    }

    resetApiConfig() {
      const endpoint = document.getElementById('api-endpoint');
      const apiKey = document.getElementById('api-key');
      
      if (endpoint) {
        endpoint.value = 'https://api-inference.huggingface.co/models/google/gemma-3n-4b-it';
      }
      if (apiKey) {
        apiKey.value = '';
      }
      
      this.showStatusMessage('é…ç½®å·²é‡ç½®ä¸ºé»˜è®¤å€¼', 'info');
    }

    toggleApiKeyVisibility() {
      const apiKey = document.getElementById('api-key');
      const toggleBtn = document.getElementById('toggle-api-key');
      
      if (apiKey && toggleBtn) {
        if (apiKey.type === 'password') {
          apiKey.type = 'text';
          toggleBtn.innerHTML = `
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"></path>
            </svg>
          `;
        } else {
          apiKey.type = 'password';
          toggleBtn.innerHTML = `
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
            </svg>
          `;
        }
      }
    }

    showStatusMessage(message, type) {
      const statusDiv = document.getElementById('api-status-message');
      const statusText = document.getElementById('status-text');
      
      if (statusDiv && statusText) {
        statusText.textContent = message;
        statusDiv.className = `mt-4 p-3 rounded-lg ${type === 'success' ? 'bg-green-100 text-green-800' : type === 'error' ? 'bg-red-100 text-red-800' : 'bg-blue-100 text-blue-800'}`;
        statusDiv.classList.remove('hidden');
        
        setTimeout(() => {
          statusDiv.classList.add('hidden');
        }, 3000);
      }
    }

    switchScenario(scenario) {
      console.log('Switching scenario to:', scenario);
      
      // Remove active class from all buttons
      document.querySelectorAll('.scenario-btn').forEach(btn => {
        btn.classList.remove('active', 'bg-blue-100', 'dark:bg-blue-900/30', 'text-blue-700', 'dark:text-blue-300');
        btn.classList.add('bg-gray-100', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-300');
      });

      // Add active class to clicked button
      const activeBtn = document.querySelector(`[data-scenario="${scenario}"]`);
      if (activeBtn) {
        activeBtn.classList.remove('bg-gray-100', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-300');
        activeBtn.classList.add('active', 'bg-blue-100', 'dark:bg-blue-900/30', 'text-blue-700', 'dark:text-blue-300');
      }

      this.currentScenario = scenario;
      
      // æ›´æ–°å…¨å±€å˜é‡ï¼Œä¾›gemmaApiä½¿ç”¨
      window.currentScenario = scenario;
      
      this.updateInputPlaceholder();
    }

    updateInputPlaceholder() {
      const input = document.getElementById('demo-input');
      if (!input) return;
      
      // ä½¿ç”¨i18nç¿»è¯‘
      const placeholders = {
        code: t('demo.input.text.placeholder.code'),
        translate: t('demo.input.text.placeholder.translate'),
        chat: t('demo.input.text.placeholder.chat')
      };
      input.placeholder = placeholders[this.currentScenario] || t('demo.input.text.placeholder');
    }

    async initModel() {
      console.log('Starting model initialization');
      try {
        const statusText = document.getElementById('status-text');
        const statusIndicator = document.getElementById('status-indicator');
        const generateBtn = document.getElementById('generate-btn');
        const generateText = document.getElementById('generate-text');

        // æ£€æŸ¥DOMå…ƒç´ æ˜¯å¦å­˜åœ¨
        if (!statusText || !statusIndicator || !generateBtn || !generateText) {
          console.error('Required DOM elements not found:', {
            statusText: !!statusText,
            statusIndicator: !!statusIndicator,
            generateBtn: !!generateBtn,
            generateText: !!generateText
          });
          return;
        }

        const steps = [
          { text: t_loading_initializing, delay: 1000 },
          { text: t_loading_engine, delay: 800 },
          { text: t_loading_wasm, delay: 600 },
          { text: t_loading_vocab, delay: 500 },
          { text: t_loading_weights, delay: 700 }
        ];

        for (const step of steps) {
          statusText.textContent = step.text;
          await new Promise(resolve => setTimeout(resolve, step.delay));
        }

        // Model ready
        this.isModelLoaded = true;
        statusText.textContent = t_status_ready;
        statusIndicator.className = 'w-3 h-3 bg-green-500 rounded-full';
        generateBtn.disabled = false;
        generateBtn.style.cursor = 'pointer';
        generateText.textContent = t_button_generate;
        
        // Enable scenario buttons after model is loaded
        const scenarioButtons = document.querySelectorAll('.scenario-btn');
        scenarioButtons.forEach(btn => {
          btn.disabled = false;
          btn.style.cursor = 'pointer';
          btn.style.opacity = '1';
        });
        
        // Enable input fields
        const input = document.getElementById('demo-input');
        if (input) {
          input.disabled = false;
          input.style.cursor = 'text';
          input.style.opacity = '1';
        }
        
        // Update input placeholder
        this.updateInputPlaceholder();
        
        console.log('Model initialization completed successfully');
      } catch (error) {
        console.error('Error during model initialization:', error);
        // å³ä½¿å‡ºé”™ä¹Ÿè¦è®¾ç½®æ¨¡å‹ä¸ºå·²åŠ è½½çŠ¶æ€
        this.isModelLoaded = true;
        const statusText = document.getElementById('status-text');
        if (statusText) {
          statusText.textContent = t_status_ready;
        }
      }
    }

    async checkApiStatus() {
      try {
        console.log('Checking API status...');
        const isAvailable = await gemmaApi.checkApiStatus();
        console.log('API status result:', isAvailable);
        this.updateApiStatus(isAvailable ? 'connected' : 'fallback');
      } catch (error) {
        console.error('API status check error:', error);
        this.updateApiStatus('fallback');
      }
    }

    updateApiStatus(status) {
      this.apiStatus = status;
      const indicator = document.getElementById('api-status-indicator');
      const statusText = document.getElementById('api-status-text');
      
      if (!indicator || !statusText) {
        console.error('API status elements not found');
        return;
      }
      
      console.log('Updating API status to:', status);
      
      switch (status) {
        case 'connected':
          indicator.className = 'w-3 h-3 bg-green-500 rounded-full mr-2';
          statusText.textContent = 'âœ… APIå·²è¿æ¥ - å¯è¿›è¡ŒçœŸå®æ¨ç†';
          break;
        case 'fallback':
          indicator.className = 'w-3 h-3 bg-yellow-500 rounded-full mr-2';
          statusText.textContent = 'âš ï¸ å½“å‰ä¸ºæ¨¡æ‹Ÿæ¨¡å¼ - é…ç½®APIä»¥å¯ç”¨çœŸå®æ¨ç†';
          break;
        case 'error':
          indicator.className = 'w-3 h-3 bg-red-500 rounded-full mr-2';
          statusText.textContent = 'âŒ APIé”™è¯¯ - è¯·æ£€æŸ¥é…ç½®';
          break;
        default:
          indicator.className = 'w-3 h-3 bg-yellow-500 rounded-full mr-2';
          statusText.textContent = 'æ­£åœ¨æ£€æŸ¥APIçŠ¶æ€...';
      }
    }

    async generateResponse() {
      if (!this.isModelLoaded || this.isGenerating) return;
      
      const inputData = this.getInputData();
      if (!inputData || !inputData.content) {
        alert(t_alert_no_input);
        return;
      }

      this.isGenerating = true;
      const generateBtn = document.getElementById('generate-btn');
      const generateText = document.getElementById('generate-text');
      const generateLoading = document.getElementById('generate-loading');
      const output = document.getElementById('output-area');

      if (!generateBtn || !generateText || !generateLoading || !output) {
        console.error('Generate elements not found');
        return;
      }

      generateBtn.disabled = true;
      generateText.classList.add('hidden');
      generateLoading.classList.remove('hidden');
      output.innerHTML = `<div class="text-blue-600">${t_output_thinking}</div>`;
      
      const startTime = performance.now();
      
      try {
        const response = await this.callGemmaAPI(inputData);
        
        const endTime = performance.now();
        const inferenceTime = Math.round(endTime - startTime);
        
        await this.displayResponse(output, response.content);
        
        this.updateMetrics(inferenceTime, response.usage);
        
      } catch (error) {
        console.error('Generation error:', error);
        output.innerHTML = `<div class="text-red-500">${t_error} ${error.message}</div>`;
        this.updateApiStatus('error');
      } finally {
        this.isGenerating = false;
        generateBtn.disabled = false;
        generateText.classList.remove('hidden');
        generateLoading.classList.add('hidden');
      }
    }

    getInputData() {
      if (window.multimodalInput) {
        return window.multimodalInput.getInputData();
      }
      const input = document.getElementById('demo-input');
      if (input) {
        return { type: 'text', content: input.value.trim(), model: 'e2b' };
      }
      return null;
    }

    async callGemmaAPI(inputData) {
      const temperature = parseFloat(document.getElementById('temperature-slider').value);
      const params = {
        prompt: inputData.content,
        temperature: temperature,
        max_tokens: 512,
        stream: false
      };
      return await gemmaApi.generateText(params);
    }

    async displayResponse(element, content) {
      element.innerHTML = '';
      const words = content.split(' ');
      for (let i = 0; i < words.length; i++) {
        element.innerHTML += words[i] + ' ';
        element.scrollTop = element.scrollHeight;
        const delay = words[i].includes('\n') ? 100 : Math.random() * 50 + 20;
        await new Promise(resolve => setTimeout(resolve, delay));
      }
    }

    updateMetrics(inferenceTime, usage) {
      const tokensPerSec = document.getElementById('tokens-per-sec');
      const inferenceTimeEl = document.getElementById('inference-time');
      const memoryUsage = document.getElementById('memory-usage');
      
      const totalTokens = usage?.total_tokens || Math.floor(Math.random() * 50 + 30);
      const tokensPerSecValue = Math.round((totalTokens / inferenceTime) * 1000);
      const memoryValue = Math.round(Math.random() * 200 + 300);
      
      if (tokensPerSec) tokensPerSec.textContent = tokensPerSecValue;
      if (inferenceTimeEl) inferenceTimeEl.textContent = inferenceTime;
      if (memoryUsage) memoryUsage.textContent = memoryValue;
    }
  }

  // ç«‹å³åˆ›å»ºå®ä¾‹
  console.log('Creating GemmaDemo instance');
  new GemmaDemo();
</script>

<style>
  .interactive-demo {
    border-radius: 0.75rem;
    overflow: hidden;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
  }

  .scenario-btn {
    transition: all 0.2s ease;
  }

  .scenario-btn:hover:not(.active) {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  .scenario-btn.active {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
  }

  #temperature-slider {
    -webkit-appearance: none;
    appearance: none;
    height: 6px;
    border-radius: 3px;
    background: #e5e7eb;
    outline: none;
  }

  #temperature-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #3b82f6;
    cursor: pointer;
  }

  #temperature-slider::-moz-range-thumb {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #3b82f6;
    cursor: pointer;
    border: none;
  }

  #output-area {
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
    line-height: 1.6;
  }

  @media (max-width: 768px) {
    .interactive-demo {
      margin: 0 -1rem;
      border-radius: 0;
    }
  }
</style> 